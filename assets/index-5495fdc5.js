import{p as C,d as W,h as E,w as z,a as I,r as D}from"./index-34384c93.js";import{g as N,H as A,B as $,a5 as U,a8 as j,A as F,a9 as K,aa as f,d as V,b as q,h as x,C as G}from"./index-adab3419.js";import{u as L,b as J,d as k}from"./base-e795ffa2.js";import{t as Q}from"./el-button-98ea7534.js";import{g as Z}from"./el-table-column-b7bfc4a5.js";import{P as v}from"./vnode-d9e47aa1.js";const de=(e,o,n)=>{let s={offsetX:0,offsetY:0};const a=l=>{const u=l.clientX,i=l.clientY,{offsetX:d,offsetY:m}=s,r=e.value.getBoundingClientRect(),p=r.left,y=r.top,S=r.width,T=r.height,Y=document.documentElement.clientWidth,O=document.documentElement.clientHeight,B=-p+d,H=-y+m,P=Y-p-S+d,X=O-y-T+m,h=b=>{const w=Math.min(Math.max(d+b.clientX-u,B),P),M=Math.min(Math.max(m+b.clientY-i,H),X);s={offsetX:w,offsetY:M},e.value.style.transform=`translate(${C(w)}, ${C(M)})`},g=()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",g)},c=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",a)},t=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",a)};N(()=>{A(()=>{n.value?c():t()})}),$(()=>{t()})},re=(e,o={})=>{U(e)||Q("[useLockscreen]","You need to pass a ref param to this function");const n=o.ns||L("popup"),s=j(()=>n.bm("parent","hidden"));if(!W||E(document.body,s.value))return;let a=0,c=!1,t="0";const l=()=>{setTimeout(()=>{D(document==null?void 0:document.body,s.value),c&&document&&(document.body.style.width=t)},200)};F(e,u=>{if(!u){l();return}c=!E(document.body,s.value),c&&(t=document.body.style.width),a=Z(n.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,d=z(document.body,"overflowY");a>0&&(i||d==="scroll")&&c&&(document.body.style.width=`calc(100% - ${a}px)`),I(document.body,s.value)}),K(()=>l())},_=e=>{if(!e)return{onClick:f,onMousedown:f,onMouseup:f};let o=!1,n=!1;return{onClick:t=>{o&&n&&e(t),o=n=!1},onMousedown:t=>{o=t.target===t.currentTarget},onMouseup:t=>{n=t.target===t.currentTarget}}},R=J({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),ee={click:e=>e instanceof MouseEvent},te="overlay";var oe=V({name:"ElOverlay",props:R,emits:ee,setup(e,{slots:o,emit:n}){const s=L(te),a=u=>{n("click",u)},{onClick:c,onMousedown:t,onMouseup:l}=_(e.customMaskEvent?void 0:a);return()=>e.mask?q("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:t,onMouseup:l},[x(o,"default")],v.STYLE|v.CLASS|v.PROPS,["onClick","onMouseup","onMousedown"]):G("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(o,"default")])}});const ie=oe;export{ie as E,re as a,_ as b,de as u};
